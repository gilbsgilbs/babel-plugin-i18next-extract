trigger:
  branches:
    include:
      - master
      - features/*
      - releases/*
      - greenkeeper/*
  tags:
    include:
      - '*'

stages:
  - stage: tests
    displayName: Run tests
    jobs:
      - job: test
        displayName: Run test
        pool:
          vmImage: "ubuntu-latest"
        container: "$[ coalesce(variables.container, 'node:12') ]"
        strategy:
          matrix:
            node10:
              container: 'node:10'
            node12:
              container: 'node:12'
        steps:
          - script: yarn install && yarn run test --coverage

